# 🏥 Medical Aesthetic News Intelligence System (Structure)

이 문서는 시스템의 전반적인 구조와 운영 방식을 정의합니다. 필요에 따라 내용을 수정하여 시스템의 방향성을 변경할 수 있습니다.

---

## 🟢 1. 시스템 개요 (Brief)

- **목적**: 12월 1일 이후의 미용의료 산업 뉴스를 자동 수집하고, 전문가 시각으로 분석하여 보고서를 생성합니다.
- **핵심 엔진**: `collector/async_collector.py`
- **최종 결과물**:
    1. **Google Sheets**: 마켓 리서치용 9대 컬럼 실시간 리포트 (`Market Analysis` 탭)
    2. **Supabase DB**: 뉴스 대시보드 웹사이트용 데이터 저장

---

## 🔵 2. 상세 아키텍처 (Detail)

### 🛰️ 단계별 프로세스

1. **수집 (Crawl)**: 네이버 API를 통해 뉴스 수집 (12월 1일 기준 필터링)
2. **필터링 (Deduplication)**:
    - **링크 중복**: 동일 URL 원천 차단
    - **지능형 제목 중복**: 제목 유사도 85% 이상 시 어뷰징 기사로 판단하여 제거
3. **분석 (AI Analysis)**: Gemini, Groq, OpenAI 등 멀티 모델을 활용한 정밀 분석
4. **동기화 (Sync)**: 분석 즉시 DB와 구글 시트에 데이터 동기화

### 📋 전문가용 9대 컬럼 구조 (Google Sheets)

| 순서 | 컬럼명 | 내용 설명 |
| :--- | :--- | :--- |
| 1 | **분석 시각** | 데이터가 분석된 실시간 타임스탬프 |
| 2 | **검색 키워드** | 수집 시 사용된 키워드 (정제된 텍스트) |
| 3 | **헤드라인** | 기사 제목 (HTML 태그 제거 완료) |
| 4 | **링크** | 기사 원문 URL (Unique ID 역할) |
| 5 | **메인 키워드** | 전문가 키워드 풀 중 가장 핵심적인 1순위 키워드 |
| 6 | **포함 키워드** | 본문 내 언급된 모든 전문가 키워드 리스트 |
| 7 | **발행 시각** | 실제 뉴스 보도 날짜 및 시간 (ISO 형식) |
| 8 | **이슈 성격** | 기사의 전략적 분류 (ex: 제품 출시/허가, 임상/연구데이터, 실적/수출/경영/주식, 법적분쟁/규제, 투자/M&A, 학회/마케팅, 기타) |
| 9 | **AI 한 줄 요약** | 전문가 관점의 50자 내외 핵심 요약 |

---

## 🔑 3. 키워드 관리 전략 (Keywords)

현재 시스템은 **단일 진실 공급원(Single Source of Truth)** 원칙을 따르며, 모든 키워드 정책은 `_docs/BACKEND_GUIDELINES.md`에 통합 관리됩니다.

- **수집 키워드 (Collector)**: `.env` 파일 관리
- **분석/분류 키워드 (Processor)**: `_shared/keywords.json` 파일 관리

---

## 🚀 4. 실행 및 관리 (Operations)

- **수집 시작**: `python collector/async_collector.py`
- **데이터 삭제(초기화)**: 필요 시 `supabase.table('articles').delete()` 명령어로 청소 가능
- **유지보수**: 새로운 브랜드나 회사가 생기면 `local_keyword_extractor.py`의 `EXPERT_ANALYSIS_KEYWORDS` 리스트에 추가만 하면 자동으로 시스템 전체에 반영됩니다.

---

*최종 업데이트: 2025-12-24*  
*작성자: Antigravity*
